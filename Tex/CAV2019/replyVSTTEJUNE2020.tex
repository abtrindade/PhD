\documentclass[11pt]{article}

\usepackage[normalem]{ulem}
\usepackage[english]{babel}
\usepackage[latin1]{inputenc}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{epstopdf}
\usepackage{url}
%\usepackage{mathtools}
\usepackage{enumerate}
\usepackage[nodayofweek]{datetime}
\usepackage[caption=false]{subfig}
%\mathtoolsset{showonlyrefs}
\usepackage[linesnumbered,lined,ruled,boxed]{algorithm2e}
\SetKw{KwBy}{by}
\usepackage{xcolor}
%\input{rgbcolors}
%\usepackage{color}
\usepackage{natbib}
% \usepackage[style=authoryear-comp,dashed=false]{biblatex}
% \bibliography{piecewise_lyapunov}
\newtheorem{myassumption}{Assumption}
\newcommand{\mstitle}{Synthesis of Solar Photovoltaic Systems: Optimal Sizing Comparison}
\newcommand{\refnumber}{Paper 14}
\newenvironment{resposta}{~~~\begin{quote}\color{blue}\textbf{Response:}}{\end{quote}}
\newcommand{\comment}[1]{}
%\definecolor{DarkGreen}{rgb}{0.2, 0.4, 0.2}
\usepackage{amsmath}
\usepackage{listings}
\lstset{language=C,basicstyle=\small\ttfamily}
\usepackage{tikz}
\usetikzlibrary{positioning, automata, shapes.arrows, calc, shapes, arrows, calc,patterns,decorations.pathmorphing,decorations.markings}

\newcommand{\param}[2]{\ensuremath{\langle{#1},{#2}\rangle}\xspace}
\textwidth 15cm
\setlength{\textheight}{1.1\textheight}
\newcommand\hi{\hspace*{\parindent}}
\newcommand\vi{\vspace{\baselineskip}}
\newcommand\lac{{\mbox{{\Huge\bf L}\hspace{-0.65em}
\raisebox{-1.2ex}{\Huge\bf A}\hspace{-1.1em}
\raisebox{-0.6ex}{\Huge\bf C~}}}}
\newcommand{\fwlfunction}[1]{\mathcal{FWL}[#1]}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\lhead{Manuscript Reference Number: \refnumber}
\rhead{Page \thepage\ of \pageref{LastPage}}
\lfoot{}
\rfoot{}

%\pagestyle{headings}
\pagenumbering{roman}
\begin{document}
\setcounter{page}{1}
\thispagestyle{empty}


\hoffset -1.5cm \voffset .5cm


\sf

\vspace*{-2.5cm} \hspace*{-0.1cm} {\small
{\mbox{\begin{minipage}{2cm}
\centerline{\includegraphics[width=1.5cm]{ufam_logo.png}}
\end{minipage}}} \hspace*{0.1cm}
\begin{minipage}{11.0cm}{\large \textbf{Federal University of Amazonas}}\\
{\sc Faculty of Technology}\\
{\sc Department of Electricity}
\end{minipage}
} \vspace*{0mm}

\hspace*{-.7cm} {\rule[-1ex]{15cm}{0.03cm}}

\begin{flushright}
\begin{minipage}{7.0cm}\small
{\bf Please Reply to:}\\
Adjunct Professor Alessandro Trindade\\
Universidade Federal do Amazonas\\
Departamento de Eletricidade\\
Av. Gal. Rodrigo Otávio, 3000, Japiim, Campus Universitário\\
ZIP 69077-000, Manaus - AM, Brazil\\
{\em alessandrotrindade@ufam.edu.br}
\end{minipage}
\end{flushright}
 
\vi
\hspace*{\fill}{\small Manaus, \today.}
\vi



\begin{flushleft}
	Nadia Polikarpova and Maria Christakis \\
	PC co-chairs,\\
	VSTTE'20
    \end{flushleft}
\vi

\begin{flushleft}
\textbf{REF.:} \refnumber
    \end{flushleft}
\vi \vi
 
\indent Dear Nadia Polikarpova and Maria Christakis,
\vi 

We thank you for asking us to comply with your reviewers' reports. 
We are submitting a revised version of our manuscript entitled 
``{\em \mstitle}'' by Alessandro Trindade and Lucas Cordeiro. 
This revised version carefully addresses each comment provided 
by the reviewers, as suggested in your original decision letter. 
In particular, our reply letter describes all modifications we made 
to our manuscript and the respective responses to the comments 
raised by the reviewers.  

%\vi

%Thank you very much in advance.

\vi\vi

\indent
Sincerely,\\



\begin{quote}
\begin{quote}
\begin{flushright}


\vi
\vi

Alessandro B. Trindade~~~~~~~
\end{flushright}
\end{quote}
\end{quote}

\hoffset -1.5cm \voffset .5cm


% =============================================
\newpage
\subsection*{Authors'  Response to the Review Comments on manuscript ``{\mstitle}'' -- Manuscript Reference Number: \refnumber}

\vi

The authors would like to thank the anonymous reviewers for their valuable and constructive comments and suggestions, which helped us significantly improve the quality of our manuscript. 

According to the reviewers' comments, our manuscript has been carefully revised and all detailed changes are highlighted in red color, along with the original text. The revision included the Abstract, Introduction, Methodology?????, and Results???? sections.

Our responses  to all comments (in blue color) are given in the sequel, with clear indications about how and where they were addressed along our manuscript.

We hope those modifications in our manuscript and also our responses are sufficient to make our work suitable for publication.



\newpage
\subsection*{Reviewer \#1 comments followed by the authors' answers:}

\begin{quote}

The paper presents an application of program verification and synthesis to select a combination of photovoltaic (PV) components that are optimally sized from a given set of available commercial components. The approach is compared to a commercial simulation tool, and generates PV systems that have better power characteristics.

The application of existing verification and synthesis techniques for solving the real-world problem of designing optimal PV systems is very interesting, and certainly in scope of VSTTE. However, the current presentation of the paper needs to be substantially improved.

First, it is not entirely clear who the paper is primarily aimed at. For a software verification conference, it assumes too much knowledge of PV systems and the physics involved, but on the other hand, includes too little detail about the actual verification and synthesis technique. For example, the background in section 2.2 is not accessible to a general verification audience. Rather, I would suggest to provide a much more high-level background on PV systems, and simply state that such a system can be modelled using a set of equations, possibly giving the (main) variables. Similarly, many of the PV-specific details in the evaluation are not accesible for a general verification audience, and need to be discussed at a higher level.

\begin{resposta} 
Alessandro: acho que o revisor tem razão. Creio que valeria a pena tratar a parte da modelagem e fenômenos da geração de energia a um nível mais alto. Vou trabalhar isso mas sem remover toda a modelagem.


\end{resposta}

Secondly, the problem that the paper is trying to solve needs to be stated precisely and early. In particular, it is not clear to me what the optimization objective is, i.e. what does 'optimal sizing' mean? Do you optimize for cost, or power consumption, or both? Currently, it is not until section 3 (page 8), that the paper seems to explain that the optimization is done w.r.t. to cost, but the evaluation seems to contradict this, because the commercial solution is regarded as not optimal, even though it has the lowest cost (in dollars).

\begin{resposta} 
Alessandro: realmente a definição de optimal sizing não é colocada logo de início. Realmente a definição só vem na página 8, não tem na Introdução. Vou melhorar a parte introdutória e onde explica o comparativo da solução ótima. No comparativo, o ótimo de uma ferramenta é apenas o ótimo da ferramenta, não necessariamente o ótimo do comparativo com outras ferramentas. Vou deixar isso claro lá também na parte de avaliação perto do quadro comparativo.


\end{resposta}

Then, I am confused about which verification, resp. synthesis, technique is actually being used. This is partially due to lack of details, but also because of inconsistencies in the paper. In different places, the paper describes the technique as CEGIS, or as model checking, or as optimization. 

\begin{resposta} 
Alessandro: Pra mim, é o desenvolvimento de uma técnica (como já discutimos em janeiro), que usa model checking e, como é feita em duas etapas, ela lembra o modo como o CEGIS funciona. E como o resultado é uma solução ótima, o resultado é uma otimização. Creio que isto deva ir pra introdução também (e pro abstract).


\end{resposta}

Algorithm 1 to me seems to construct a contraint and then tries to solve it for the nondeterministic variables to obtain a solution, and to use essentially a linear search to find the minimum cost. Is this correct? If so, it is unclear to me how this fits with the CEGIS algorithm in Fig. 2, and where model checking is used.

\begin{resposta} 
Alessandro: Provavelmente eu tenha que melhorar o texto, pois a escolha de uma solução factível ou não achar uma solução factível já é por model checking ( e isso corresponde a 1a parte da técnica), a 2a parte é uma busca linear mas com teste de SUCCESS ou FAIL para gerar contraexemplo (e, pra mim, é model checking de novo).Pra mim, estamos aplicando model checking duas vezes na técnica. \textbf{Que achas?}  \textbf{Lucas: Concordo. Nao poderia aplicar uma busca binaria como fizemos no nosso journal do IJES?} 


\end{resposta}


Finally, section 2.2 presents nonlinear continuous real-valued constraints.How can the discrete solvers used handle these constraints?   

\begin{resposta} 
Alessandro: Essa questão é para se pensar. Pra mim, a não linearidade das equações do artigo anterior de validação de sistemas solares estava mais claro pois usamos equações exponenciais e logaritmas. Nesse, a não linearidade se deve ao fato de a curva do ótimo global não ser contínua, pois pegamos valores específicos de variáveis não determinísticas, valores inteiros...daí eu não sei responder o que o revisor questionou.

Lucas: Modelamos essas usando aritmética de ponto flutuante. É apenas uma aproximação dos números reais. No entanto, neste trabalho, não nos preocupamos em calcular o erro de arredondamento. Precisamos enfatizar isso no texto. Esse nosso paper descreve um pouco sobre esses erros: https://arxiv.org/pdf/2004.12699.pdf

\end{resposta}

\end{quote}
\newpage


\subsection*{Reviewer \#2 comments followed by the authors' answers:} 

\begin{quote}

This paper presents a novel approach based on formal methods in order to obtain the optimal size of solar photovoltaic systems. The paper first introduces the basic formalization of such systems (in Section 2), then it discusses how these were modeled by means of formal methods (Section 3), and it then presents and discusses the experimental results (Section 4) comparing it with a commercial tool performing the same tasks using a different approach (HOMER).

Pros
--------

* This paper extends the application of formal methods to a novel scenario (aka optimization of solar photovoltaic systems).

* Overall, the formal approach seems to be sound and robust, even if I was not able to fully understand the background (see cons below).

* The authors have carried out very deep experiments. In particular, the algorithm was tested using 3 different state-of-the-art verifiers, and the results were compared with a commercial solution. In addition, since it is not straightforward to evaluate the results without a real system validation, the authors used a simulation tool.

\begin{resposta} 
Thank you.
\end{resposta}

Cons
--------

* For someone not familiar with the topic (like myself and, I would expect, 95\% of VSTTE community), it might be difficult to understand the overall setup, since Section 2 fails to provide some of the background (see minor comments below)

\begin{resposta} 
Mesmo do revisor 1. Mudanças que farei endereçarão isso

\end{resposta}

* In general, I would say that the experimental results are not outstanding, but they show some potential in applying a total different approach to this field. However, the authors at the beginning state that the goal is to compute a solution with minimal cost, but then in Table 1 Homer computed cheapest solutions in all the cases, then it looks like the introduced approach is worse than existing commercial tools. Then the following discussion is a bit shallow: Table 2 "show that the synthesis solution is sound and complete, which answers EG1 and EG3", but EG3 is about "how does our formal synthesis tool compare to a specialized simulation tool?" (so I am still not sure if Homer is sound and complete and what's the comparison). Finally, the three drawbacks of Homer are discussed at the end of Section 4.4, but this is not about the costs of the system, and not connect to the three experimental goals.


\begin{resposta}
Preciso pensar aqui
 
\end{resposta}

- Almost all equations end with a comma, please remove it

\begin{resposta}
Thank you for the advice. We removed all the commas.
 
\end{resposta}

- Page 2: specialist PV optimization software -> specialized PV optimization software
done

\begin{resposta}
Thank you, we corrected the text as suggested.
\end{resposta}

- In the introduction it is stated that formal methods for PV systems are unexplored in literature. I think a discussion about why this is the case, and what is intuitively needed to apply them to this new scenario would help the reader to understand the potential and impact of the novel approach


\begin{resposta}
Concordo. Vou fazer isso no texto
\end{resposta}

- Section 2.2: some parts of this section are not well explained. To people that do not know this field, some choices feel completely arbitrary: why a factor of 20\% for losses is considered in equation 2? Similarly, why DOD is 75\%? I guess these are standard values, but maybe some citations of papers using the same parameters (or discussing them) might be helpful to convince the reader about the robustness of the formalization

\begin{resposta}
Concordo. Vou acrescer isso no texto
\end{resposta}

- page 6: Therefore, here in this study, the definition given here -> Therefore, the definition given here

\begin{resposta}
Thank you, we corrected the text as suggested.
\end{resposta}

- From equation 9 on I was lost. What are G, G\_ref, and T equation 9? Why you have T - 25 here? What is N\_PP in equation 10a?

\begin{resposta}
Thank you, you were right. The whole sentence was rebuild, with correct mention and explanation about the elements.
\end{resposta}

- Equation 6 is missing the 'x' to represent multiplications

\begin{resposta}
Thank you, we corrected the text.
\end{resposta}

- Page 10: start-of-the-art -> state-of-the-art
done

\begin{resposta}
Thank you, we corrected the text as suggested.
\end{resposta}

\end{quote}
\newpage

\subsection*{Reviewer \#3 comments followed by the authors' answers:} 

\begin{quote}
The paper describes a system for optimally sizing PV systems.
A detailed account is given of both modeling parameters, evaluation method
and evaluation results. The details, covered in the paper, contain
a substantial amount of information on PV optimization and approaches
for solving the constraints. It uses methods developed in the FM
community, such as CBMC with MiniSAT, MathSat and Boolector and compares with
available commercial tools based on other technologies.
The substantial results are impressive and be inspirational.
There are also some drawbacks that makes the material not well
accessible:
- The description is very tedious and mixes a lot of low level
  information that is really only interesting to the authors
  and not suitable for a conference paper. More emphasis should
  be applied to the overall principles, and then details should be
  presented as instantiations.
  Essentially, parts of the paper, such as section 2.2 are not
  really useful. It is not possible for a reader to keep track of
  the many variables that are introduced. I don't see how they add
  conceptual value.
  Algorithm 1 also contains too many references to inlined variables.


\begin{resposta} 
Repete o revisor 1. As mudanças que farei matam essas questões
\end{resposta}

 I do have some doubts about suitable the encodings that
  the authors choose, in particular, how relevant full fledged
  floating point reasoning is, but have no way to check.
  For a conference paper I am quite willing to give the paper a
  pass on this doubt as exposing details in the encodings could
  make the paper even less accessible.
- The paper contains several awkwardly formulated sentences. Examples
  are listed below.

The net effect is that the paper reads as a tour-de-force in "we did all of this hard work", but does not read "let us explain you something new and interesting from what we learned to inspire you".

Overall, based on the substance of the results, the paper remains adequate for the venue.

\begin{resposta}
Thank you.
\end{resposta}

Examples of awkward sentences:

Progress has been made worldwide; in particular, in 2017, the number
of people without electricity access fell below 1 billion thresholds
-> Progress has been made worldwide; in particular, in 2017, the number
of people without electricity access fell below 1 billion

\begin{resposta}
Thank you, we corrected the text as suggested.
\end{resposta}

they have the drawback of an incomplete coverage ->
they have the drawback of incomplete coverage

\begin{resposta}
Thank you, we corrected the text as suggested.
\end{resposta}

are infeasible

\begin{resposta}
Thank you, we corrected the the two occurrences to "not feasible".
\end{resposta}

In 2017, a researcher suggested the application of formal methods to verify and
control the behaviour of computational devices in a smart grid [2].

\begin{resposta}
Thank you, we corrected the text to ?In 2017, it was suggested the application...?.
\end{resposta}


are still unexplored in literature
$->$

\begin{resposta}
Thank you, we corrected the text as "systems are not explored in literature".
\end{resposta}

using the traditional techniques
->

\begin{resposta}
Thank you, we corrected the text as "using the manual or simulation techniques and...".
\end{resposta}

For the automated synthesis
->

\begin{resposta}
Thank you, we corrected the text as "However, when using automated synthesis..".
\end{resposta}


\end{quote}


\label{LastPage}

% \printbibliography
\end{document} 
